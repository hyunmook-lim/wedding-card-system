# λ¨λ°”μΌ μ²­μ²©μ¥ μ‹μ¤ν… (Wedding Card System)

μ΄ ν”„λ΅μ νΈλ” **Next.js App Router + Component Registry** ν¨ν„΄μ„ λ”°λ¥΄λ©°, λ™μ  μ„¤μ •(Config-Driven) κΈ°λ°μ λ¨λ°”μΌ μ²­μ²©μ¥ μ‹μ¤ν…μ„ μ κ³µν•©λ‹λ‹¤.

## ν”„λ΅μ νΈ κµ¬μ΅° (Project Structure)

### π“‚ λ””λ ‰ν† λ¦¬ κµ¬μ΅° μƒμ„Έ (Directory Overview)

```bash
src/
β”β”€β”€ app/                  # Next.js App Router λ””λ ‰ν† λ¦¬
β”‚   β”β”€β”€ [weddingId]/      # μ²­μ²©μ¥ λ™μ  λΌμ°νΈ (Dynamic Route)
β”‚   β”‚   β”β”€β”€ page.tsx      # μ„λ²„ μ»΄ν¬λ„νΈ: λ°μ΄ν„° νμΉ­ λ° λ©”νƒ€λ°μ΄ν„° μƒμ„±
β”‚   β”‚   β””β”€β”€ layout.tsx    # λ¨λ°”μΌ λ μ΄μ•„μ›ƒ μ»¨ν…μ΄λ„
β”‚   β”β”€β”€ api/              # λ°±μ—”λ“ API λΌμ°νΈ (ν•„μ” μ‹)
β”‚   β””β”€β”€ globals.css       # μ „μ—­ μ¤νƒ€μΌ (Tailwind CSS)
β”‚
β”β”€β”€ components/           # React μ»΄ν¬λ„νΈ
β”‚   β”β”€β”€ sections/         # κ°λ³„ μ„Ήμ… μ»΄ν¬λ„νΈ (JSON typeκ³Ό λ§¤ν•‘λ¨)
β”‚   β”‚   β”β”€β”€ Intro/        # "intro" νƒ€μ… μ„Ήμ… (λ€λ¬Έ)
β”‚   β”‚   β”β”€β”€ Greeting/     # "greeting" νƒ€μ… μ„Ήμ… (μΈμ‚¬λ§)
β”‚   β”‚   β”β”€β”€ BrideGroom/   # "bride_groom" νƒ€μ… μ„Ήμ… (μ‹ λ‘μ‹ λ¶€)
β”‚   β”‚   β”β”€β”€ Date/         # "date" νƒ€μ… μ„Ήμ… (λ‚ μ§)
β”‚   β”‚   β”β”€β”€ Location/     # "location" νƒ€μ… μ„Ήμ… (μ¤μ‹λ” κΈΈ)
β”‚   β”‚   β”β”€β”€ Account/      # "account" νƒ€μ… μ„Ήμ… (λ§μ μ „ν•μ‹¤ κ³³)
β”‚   β”‚   β””β”€β”€ Gallery/      # "gallery" νƒ€μ… μ„Ήμ… (μ‚¬μ§„μ²©)
β”‚   β”β”€β”€ backgrounds/      # β… λ™μ  λ°°κ²½ λ μ΄μ–΄ μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ BackgroundRenderer.tsx # λ°°κ²½ & ν¨κ³Ό ν†µν•© λ λ”λ¬
β”‚   β”‚   β”β”€β”€ SolidColorBackground.tsx
β”‚   β”‚   β””β”€β”€ ImageBackground.tsx    # μ¤ν¬λ΅¤ μΈν„°λ™μ…(Zoom, Fade) ν¬ν•¨ μ΄λ―Έμ§€ λ°°κ²½
β”‚   β”β”€β”€ effects/          # β… μ „μ—­ λ° μ„Ήμ…λ³„ μ‹κ° ν¨κ³Ό λ μ΄μ–΄
β”‚   β”‚   β”β”€β”€ EffectsRenderer.tsx    # λ‹¤μ¤‘ ν¨κ³Ό(λ, λ²κ½ƒ λ“±) λ…λ¦½ λ λ”λ¬
β”‚   β”‚   β””β”€β”€ SnowEffect.tsx         # Framer-motion κΈ°λ° λ λ‚΄λ¦¬λ” νν‹°ν΄ ν¨κ³Ό
β”‚   β”β”€β”€ ui/               # μ¬μ‚¬μ© UI μ»΄ν¬λ„νΈ (StickySection λ“±)
β”‚   β””β”€β”€ SectionRegistry.tsx # [Client] JSON μ„¤μ •μ„ React μ»΄ν¬λ„νΈλ΅ λ§¤ν•‘ν•λ” λ μ§€μ¤νΈλ¦¬
β”‚
β”β”€β”€ lib/                  # μ ν‹Έλ¦¬ν‹° λ° λΉ„μ¦λ‹μ¤ λ΅μ§
β”‚   β”β”€β”€ fetch-wedding.ts  # λ°μ΄ν„° μ΅°ν(Fetching) λ΅μ§
β”‚   β””β”€β”€ mock-data.ts      # UI ν…μ¤νΈ λ° κ°λ°μ© λ©μ—… λ°μ΄ν„°
β”‚
β””β”€β”€ types/                # TypeScript νƒ€μ… μ •μ
    β””β”€β”€ wedding.d.ts      # WeddingConfig, BackgroundConfig λ“± μΈν„°νμ΄μ¤ μ •μ
```

### π—οΈ ν•µμ‹¬ μ•„ν‚¤ν…μ² λ° λ λ”λ§ μ „λµ (Core Architecture)

1. **Config-Driven UI (λ™μ  λ λ”λ§)**:
   - `src/app/[weddingId]/page.tsx`μ—μ„ URL νλΌλ―Έν„°λ¥Ό κΈ°λ°μΌλ΅ DB μ„¤μ • λ°μ΄ν„°(JSON)λ¥Ό μ΅°νν•©λ‹λ‹¤.
   - `SectionRegistry.tsx`κ°€ μ„¤μ • λ°μ΄ν„°λ¥Ό μνν•λ©° μ μ ν• μ„Ήμ… μ»΄ν¬λ„νΈλ¥Ό λ™μ μΌλ΅ μ„ν¬νΈν•μ—¬ λ λ”λ§ν•©λ‹λ‹¤.

2. **λ…λ¦½λ 3λ‹¨κ³„ λ μ΄μ–΄ κµ¬μ΅° (Layered Rendering)**:
   κ° μ„Ήμ…(`StickySection`)μ€ ν•λ“μ½”λ”©λ UI λ€μ‹  μ™„λ²½ν•κ² λ¶„λ¦¬λ 3κ°μ μΈµ(Layer)μΌλ΅ λ λ”λ§λ©λ‹λ‹¤.
   - **[λ§¨ μ•] ν…μ¤νΈ λ μ΄μ–΄ (`z-10`)**: `CardBrideGroom`, `BasicDate` λ“± μ‹¤μ  μ •λ³΄κ°€ ν‘μ‹λλ” μ„Ήμ… μ½ν…μΈ  μ»΄ν¬λ„νΈ.
   - **[μ¤‘κ°„] ν¨κ³Ό λ μ΄μ–΄ (`z-1`, `pointer-events-none`)**: `EffectsRenderer`κ°€ κµ¬λ™ν•λ” λ™μ  μ• λ‹λ©”μ΄μ… μΈµ (μ: λ λ‚΄λ¦Ό, λ²κ½ƒ λ‚ λ¦Ό). μ‚¬μ©μμ ν΄λ¦­(ν„°μΉ)μ„ λ°©ν•΄ν•μ§€ μ•μµλ‹λ‹¤.
   - **[λ§¨ λ’¤] λ°”νƒ• λ μ΄μ–΄ (`z-0`)**: `BackgroundRenderer`κ°€ κµ¬λ™ν•λ” κΈ°λ³Έ νΈλμ§€μ… μΈµ. λ‹¨μƒ‰(Color)μ΄λ‚ μ¤ν¬λ΅¤ κΈ°λ° μΈν„°λ™μ… μ΄λ―Έμ§€(Image)κ°€ κΉ”λ¦½λ‹λ‹¤.

3. **λ°°κ²½ & ν¨κ³Ό μ΅°ν•© (Pluggable Backgrounds)**:
   `wedding.d.ts`μ `BackgroundConfig` μ„¤μ •μ„ ν†µν•΄ μ–΄λ–¤ λ°μ΄ν„° μ΅°ν•©μ΄λ“  κµ¬μ„± κ°€λ¥ν•©λ‹λ‹¤.

   ```json
   // μμ‹: νλ€ ν™”λ©΄ μ„μ— λμ΄ λ‚΄λ¦¬λ” μ„¤μ •
   "background": {
     "type": "color",
     "value": "#0000FF",
     "effects": ["snow"]
   }
   ```

4. **μ„±λ¥ μµμ ν™” (Lazy Loading)**:
   - λ¬΄κ±°μ΄ Canvas μ• λ‹λ©”μ΄μ…μ΄λ‚ μΈν„°λ™ν‹°λΈ ν¨κ³Ό μ»΄ν¬λ„νΈλ“¤μ€ `next/dynamic`μ„ ν†µν•΄ μ‚¬μ©μκ°€ ν•΄λ‹Ή κΈ°λ¥μ„ μ„¤μ •ν–μ„ λ•λ§ λ΅λ“λλ„λ΅ μ§€μ—° λ΅λ”© μ²λ¦¬λμ–΄ λ¨λ°”μΌ μ„±λ¥(νΉν μ €μ „λ ¥ λ¨λ“)μ„ μµμ ν™”ν–μµλ‹λ‹¤.
